<html layout:decorate="~{layout/layout}">
<div layout:fragment="content" class="bg-gray-900 text-white">

    <div sec:authorize="hasAnyRole('USER')">
    <!-- Hero Section -->
    <section class="relative w-full h-screen overflow-hidden">
        <div class="absolute w-full h-full">
            <img src="/images/hero1.jpg" class="object-cover w-full h-full animate-fade" />
            <img src="/images/hero2.jpg" class="object-cover w-full h-full absolute top-0 left-0 opacity-0 animate-fade" />
        </div>
        <div class="absolute inset-0 flex flex-col justify-center items-center bg-black bg-opacity-40">
            <h1 class="text-5xl lg:text-6xl font-bold mb-4">Luxury Collection</h1>
            <p class="text-xl lg:text-2xl mb-6">Experience the finest beverages</p>
            <a href="#categories" class="bg-green-600 hover:bg-green-700 px-6 py-3 rounded font-semibold transition">Shop Now</a>
        </div>
    </section>

    <!-- Category Random Product Section -->
    <section id="categories" class="py-20 max-w-7xl mx-auto px-6">
        <h2 class="text-3xl font-bold mb-10 text-center">Explore Categories</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10">
            <div th:each="entry : ${randomProducts.entrySet()}"
                 class="category-product opacity-0 transform translate-x-[-50px] transition duration-700 rounded-lg overflow-hidden bg-gray-800 shadow-lg">

                <img th:src="@{'/uploads/' + ${entry.value.imageFilename}}"
                     alt="" class="w-full h-64 object-cover"/>
                <div class="p-4">
                    <h3 class="text-xl font-semibold mb-2" th:text="${entry.key.name}">Category</h3>
                    <p class="text-lg font-bold text-green-400 mb-2" th:text="${#numbers.formatInteger(entry.value.price,3,'COMMA')} + '원'">0원</p>
                    <p class="text-gray-300 truncate" th:text="${entry.value.description}">상품 설명</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Top Rated Products Section -->
    <section class="py-20 max-w-7xl mx-auto px-6">
        <h2 class="text-3xl font-bold mb-10 text-center">Best Sellers</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
            <div th:each="product : ${topRatedProducts}" class="opacity-0 transform translate-y-10 transition duration-700 rounded-lg overflow-hidden bg-gray-800 shadow-lg">
                <img th:src="@{'/uploads/' + ${product.imageFilename}}" alt="" class="w-full h-48 object-cover"/>
                <div class="p-4">
                    <h3 class="text-lg font-semibold mb-1" th:text="${product.name}">Product Name</h3>
                    <p class="text-green-400 font-bold text-lg" th:text="${#numbers.formatInteger(product.price,3,'COMMA')} + '원'">0원</p>
                </div>
            </div>
        </div>
    </section>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // Intersection Observer for scroll animation
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if(entry.isIntersecting) {
                    entry.target.classList.remove('opacity-0', 'translate-x-[-50px]', 'translate-y-10');
                    entry.target.classList.add('opacity-100', 'translate-x-0', 'translate-y-0');
                }
            });
        }, { threshold: 0.3 });

        document.querySelectorAll('.category-product, .grid > div').forEach(el => observer.observe(el));

        // Hero Slider
        const slides = document.querySelectorAll('.animate-fade');
        let currentSlide = 0;
        setInterval(() => {
            slides[currentSlide].classList.add('opacity-0');
            slides[currentSlide].classList.remove('opacity-100');
            currentSlide = (currentSlide + 1) % slides.length;
            slides[currentSlide].classList.add('opacity-100');
            slides[currentSlide].classList.remove('opacity-0');
        }, 5000);
    });
</script>
</html>
